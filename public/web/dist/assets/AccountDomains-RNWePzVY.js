import{x as E,r as y,i as D,j as O,y as J,z as W,d as T,A as oe,q as M,o as R,k as le,l as S,b as p,a as I,u as k,I as X,T as se,f as ie,c as A,F as ue,B as ce,C as de,s as me,e as B,t as j,n as V,p as fe}from"./main-BSXUZJnf.js";import{u as pe}from"./formSubmission-Q3hlCUsf.js";import{c as Y,o as h,w as Z,h as ee,I as N,A as C,u as ve,i as ge,N as H,_ as te,a as x,v as he,b as K,O as be}from"./keyboard-Dz5hsx3u.js";import{_ as ye}from"./DomainVerificationInfo.vue_vue_type_script_setup_true_lang-C_BLRcox.js";function xe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function we(){return/Android/gi.test(window.navigator.userAgent)}function _e(){return xe()||we()}function $(e,o,r){Y.isServer||E(l=>{document.addEventListener(e,o,r),l(()=>document.removeEventListener(e,o,r))})}function Ie(e,o,r){Y.isServer||E(l=>{window.addEventListener(e,o,r),l(()=>window.removeEventListener(e,o,r))})}function Se(e,o,r=D(()=>!0)){function l(n,t){if(!r.value||n.defaultPrevented)return;let s=t(n);if(s===null||!s.getRootNode().contains(s))return;let d=function v(u){return typeof u=="function"?v(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let v of d){if(v===null)continue;let u=v instanceof HTMLElement?v:h(v);if(u!=null&&u.contains(s)||n.composed&&n.composedPath().includes(u))return}return!Z(s,ee.Loose)&&s.tabIndex!==-1&&n.preventDefault(),o(n,s)}let i=y(null);$("pointerdown",n=>{var t,s;r.value&&(i.value=((s=(t=n.composedPath)==null?void 0:t.call(n))==null?void 0:s[0])||n.target)},!0),$("mousedown",n=>{var t,s;r.value&&(i.value=((s=(t=n.composedPath)==null?void 0:t.call(n))==null?void 0:s[0])||n.target)},!0),$("click",n=>{_e()||i.value&&(l(n,()=>i.value),i.value=null)},!0),$("touchend",n=>l(n,()=>n.target instanceof HTMLElement?n.target:null),!0),Ie("blur",n=>l(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function U(e,o){if(e)return e;let r=o??"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function ke(e,o){let r=y(U(e.value.type,e.value.as));return O(()=>{r.value=U(e.value.type,e.value.as)}),E(()=>{var l;r.value||h(o)&&h(o)instanceof HTMLButtonElement&&!((l=h(o))!=null&&l.hasAttribute("type"))&&(r.value="button")}),r}function q(e){return[e.screenX,e.screenY]}function De(){let e=y([-1,-1]);return{wasMoved(o){let r=q(o);return e.value[0]===r[0]&&e.value[1]===r[1]?!1:(e.value=r,!0)},update(o){e.value=q(o)}}}let ne=Symbol("Context");var P=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(P||{});function Me(){return J(ne,null)}function Te(e){W(ne,e)}function Re(e){throw new Error("Unexpected object: "+e)}var _=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(_||{});function Pe(e,o){let r=o.resolveItems();if(r.length<=0)return null;let l=o.resolveActiveIndex(),i=l??-1;switch(e.focus){case 0:{for(let n=0;n<r.length;++n)if(!o.resolveDisabled(r[n],n,r))return n;return l}case 1:{i===-1&&(i=r.length);for(let n=i-1;n>=0;--n)if(!o.resolveDisabled(r[n],n,r))return n;return l}case 2:{for(let n=i+1;n<r.length;++n)if(!o.resolveDisabled(r[n],n,r))return n;return l}case 3:{for(let n=r.length-1;n>=0;--n)if(!o.resolveDisabled(r[n],n,r))return n;return l}case 4:{for(let n=0;n<r.length;++n)if(o.resolveId(r[n],n,r)===e.id)return n;return l}case 5:return null;default:Re(e)}}let z=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Q(e){var o,r;let l=(o=e.innerText)!=null?o:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return l;let n=!1;for(let s of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),n=!0;let t=n?(r=i.innerText)!=null?r:"":l;return z.test(t)&&(t=t.replace(z,"")),t}function Fe(e){let o=e.getAttribute("aria-label");if(typeof o=="string")return o.trim();let r=e.getAttribute("aria-labelledby");if(r){let l=r.split(" ").map(i=>{let n=document.getElementById(i);if(n){let t=n.getAttribute("aria-label");return typeof t=="string"?t.trim():Q(n).trim()}return null}).filter(Boolean);if(l.length>0)return l.join(", ")}return Q(e).trim()}function $e(e){let o=y(""),r=y("");return()=>{let l=h(e);if(!l)return"";let i=l.innerText;if(o.value===i)return r.value;let n=Fe(l).trim().toLowerCase();return o.value=i,r.value=n,n}}var Ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ae||{}),Ee=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ee||{});function Ce(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ae=Symbol("MenuContext");function L(e){let o=J(ae,null);if(o===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,L),r}return o}let Le=T({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:o,attrs:r}){let l=y(1),i=y(null),n=y(null),t=y([]),s=y(""),d=y(null),v=y(1);function u(a=f=>f){let f=d.value!==null?t.value[d.value]:null,c=be(a(t.value.slice()),w=>h(w.dataRef.domRef)),g=f?c.indexOf(f):null;return g===-1&&(g=null),{items:c,activeItemIndex:g}}let m={menuState:l,buttonRef:i,itemsRef:n,items:t,searchQuery:s,activeItemIndex:d,activationTrigger:v,closeMenu:()=>{l.value=1,d.value=null},openMenu:()=>l.value=0,goToItem(a,f,c){let g=u(),w=Pe(a===_.Specific?{focus:_.Specific,id:f}:{focus:a},{resolveItems:()=>g.items,resolveActiveIndex:()=>g.activeItemIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.disabled});s.value="",d.value=w,v.value=c??1,t.value=g.items},search(a){let f=s.value!==""?0:1;s.value+=a.toLowerCase();let c=(d.value!==null?t.value.slice(d.value+f).concat(t.value.slice(0,d.value+f)):t.value).find(w=>w.dataRef.textValue.startsWith(s.value)&&!w.dataRef.disabled),g=c?t.value.indexOf(c):-1;g===-1||g===d.value||(d.value=g,v.value=1)},clearSearch(){s.value=""},registerItem(a,f){let c=u(g=>[...g,{id:a,dataRef:f}]);t.value=c.items,d.value=c.activeItemIndex,v.value=1},unregisterItem(a){let f=u(c=>{let g=c.findIndex(w=>w.id===a);return g!==-1&&c.splice(g,1),c});t.value=f.items,d.value=f.activeItemIndex,v.value=1}};return Se([i,n],(a,f)=>{var c;m.closeMenu(),Z(f,ee.Loose)||(a.preventDefault(),(c=h(i))==null||c.focus())},D(()=>l.value===0)),W(ae,m),Te(D(()=>ve(l.value,{0:P.Open,1:P.Closed}))),()=>{let a={open:l.value===0,close:m.closeMenu};return C({ourProps:{},theirProps:e,slot:a,slots:o,attrs:r,name:"Menu"})}}}),Oe=T({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:o,slots:r,expose:l}){var i;let n=(i=e.id)!=null?i:`headlessui-menu-button-${N()}`,t=L("MenuButton");l({el:t.buttonRef,$el:t.buttonRef});function s(m){switch(m.key){case x.Space:case x.Enter:case x.ArrowDown:m.preventDefault(),m.stopPropagation(),t.openMenu(),M(()=>{var a;(a=h(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(_.First)});break;case x.ArrowUp:m.preventDefault(),m.stopPropagation(),t.openMenu(),M(()=>{var a;(a=h(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(_.Last)});break}}function d(m){switch(m.key){case x.Space:m.preventDefault();break}}function v(m){e.disabled||(t.menuState.value===0?(t.closeMenu(),M(()=>{var a;return(a=h(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(m.preventDefault(),t.openMenu(),Ce(()=>{var a;return(a=h(t.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let u=ke(D(()=>({as:e.as,type:o.type})),t.buttonRef);return()=>{var m;let a={open:t.menuState.value===0},{...f}=e,c={ref:t.buttonRef,id:n,type:u.value,"aria-haspopup":"menu","aria-controls":(m=h(t.itemsRef))==null?void 0:m.id,"aria-expanded":t.menuState.value===0,onKeydown:s,onKeyup:d,onClick:v};return C({ourProps:c,theirProps:f,slot:a,attrs:o,slots:r,name:"MenuButton"})}}}),Ne=T({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:o,slots:r,expose:l}){var i;let n=(i=e.id)!=null?i:`headlessui-menu-items-${N()}`,t=L("MenuItems"),s=y(null);l({el:t.itemsRef,$el:t.itemsRef}),ge({container:D(()=>h(t.itemsRef)),enabled:D(()=>t.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function d(a){var f;switch(s.value&&clearTimeout(s.value),a.key){case x.Space:if(t.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),t.search(a.key);case x.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(f=h(c.dataRef.domRef))==null||f.click()}t.closeMenu(),te(h(t.buttonRef));break;case x.ArrowDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(_.Next);case x.ArrowUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(_.Previous);case x.Home:case x.PageUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(_.First);case x.End:case x.PageDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(_.Last);case x.Escape:a.preventDefault(),a.stopPropagation(),t.closeMenu(),M(()=>{var c;return(c=h(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case x.Tab:a.preventDefault(),a.stopPropagation(),t.closeMenu(),M(()=>he(h(t.buttonRef),a.shiftKey?K.Previous:K.Next));break;default:a.key.length===1&&(t.search(a.key),s.value=setTimeout(()=>t.clearSearch(),350));break}}function v(a){switch(a.key){case x.Space:a.preventDefault();break}}let u=Me(),m=D(()=>u!==null?(u.value&P.Open)===P.Open:t.menuState.value===0);return()=>{var a,f;let c={open:t.menuState.value===0},{...g}=e,w={"aria-activedescendant":t.activeItemIndex.value===null||(a=t.items.value[t.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(f=h(t.buttonRef))==null?void 0:f.id,id:n,onKeydown:d,onKeyup:v,role:"menu",tabIndex:0,ref:t.itemsRef};return C({ourProps:w,theirProps:g,slot:c,attrs:o,slots:r,features:H.RenderStrategy|H.Static,visible:m.value,name:"MenuItems"})}}}),G=T({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:o,attrs:r,expose:l}){var i;let n=(i=e.id)!=null?i:`headlessui-menu-item-${N()}`,t=L("MenuItem"),s=y(null);l({el:s,$el:s});let d=D(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===n:!1),v=$e(s),u=D(()=>({disabled:e.disabled,get textValue(){return v()},domRef:s}));O(()=>t.registerItem(n,u)),oe(()=>t.unregisterItem(n)),E(()=>{t.menuState.value===0&&d.value&&t.activationTrigger.value!==0&&M(()=>{var b,F;return(F=(b=h(s))==null?void 0:b.scrollIntoView)==null?void 0:F.call(b,{block:"nearest"})})});function m(b){if(e.disabled)return b.preventDefault();t.closeMenu(),te(h(t.buttonRef))}function a(){if(e.disabled)return t.goToItem(_.Nothing);t.goToItem(_.Specific,n)}let f=De();function c(b){f.update(b)}function g(b){f.wasMoved(b)&&(e.disabled||d.value||t.goToItem(_.Specific,n,0))}function w(b){f.wasMoved(b)&&(e.disabled||d.value&&t.goToItem(_.Nothing))}return()=>{let{disabled:b,...F}=e,re={active:d.value,disabled:b,close:t.closeMenu};return C({ourProps:{id:n,ref:s,role:"menuitem",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,onClick:m,onFocus:a,onPointerenter:c,onMouseenter:c,onPointermove:g,onMousemove:g,onPointerleave:w,onMouseleave:w},theirProps:{...r,...F},slot:re,attrs:r,slots:o,name:"MenuItem"})}}});const Be=p("span",{class:"sr-only"},"Open options",-1),je={class:"py-1"},Ve={__name:"MinimalDropdownMenu",setup(e){return(o,r)=>(R(),le(k(Le),{as:"div",class:"relative inline-block text-left"},{default:S(()=>[p("div",null,[I(k(Oe),{class:"flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-100"},{default:S(()=>[Be,I(k(X),{icon:"heroicons:ellipsis-vertical-20-solid",class:"h-5 w-5","aria-hidden":"true"})]),_:1})]),I(se,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:S(()=>[I(k(Ne),{class:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:S(()=>[p("div",je,[ie(o.$slots,"menu-items")])]),_:3})]),_:3})]),_:3}))}},He={class:"px-4 sm:px-6 lg:px-8 dark:bg-gray-900"},Ke={class:"sm:flex sm:items-center"},Ue=p("div",{class:"sm:flex-auto"},[p("h1",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"},"Domains"),p("p",{class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},"These are your verified custom domains.")],-1),qe={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},ze={class:"-mx-4 mt-10 ring-1 ring-gray-300 sm:mx-0 sm:rounded-lg dark:ring-gray-700"},Qe={class:"min-w-full divide-y divide-gray-300 dark:divide-gray-700"},Ge=p("thead",null,[p("tr",null,[p("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 dark:text-gray-100"},"Domain "),p("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-gray-100"}," Status"),p("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-gray-100"}," Added"),p("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[p("span",{class:"sr-only"},"Actions")])])],-1),Je={class:"divide-y divide-gray-200 dark:divide-gray-700"},We=["tabindex"],Xe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 dark:text-gray-100"},Ye={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-300"},Ze={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-300"},et={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},tt=["action"],nt=["value"],at=["disabled"],rt=p("span",null,"Remove",-1),ot=T({__name:"DomainsTable",props:{domains:{}},setup(e){const o=y(window.shrimp),r=me(),l=s=>{o.value=s},{isSubmitting:i,submitForm:n}=pe({successMessage:"Domain removed successfully",onSuccess:()=>{r.go(0)},handleShrimp:l}),t=s=>{const d=new Date(s*1e3),u=Math.floor((new Date().getTime()-d.getTime())/1e3),m=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return u<60?m.format(-u,"second"):u<3600?m.format(-Math.floor(u/60),"minute"):u<86400?m.format(-Math.floor(u/3600),"hour"):m.format(-Math.floor(u/86400),"day")};return(s,d)=>{const v=de("router-link");return R(),A("div",He,[p("div",Ke,[Ue,p("div",qe,[I(v,{to:"/account/domains/add",class:"block rounded-md bg-brand-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-brand-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-600 dark:bg-brand-500 dark:hover:bg-brand-400"},{default:S(()=>[B("Add Domain")]),_:1})])]),p("div",ze,[p("table",Qe,[Ge,p("tbody",Je,[(R(!0),A(ue,null,ce(s.domains,(u,m)=>(R(),A("tr",{key:u.identifier,tabindex:m},[p("td",Xe,j(u.display_domain),1),p("td",Ye,[I(ye,{mode:"icon",domain:u},null,8,["domain"])]),p("td",Ze,j(t(Number(u.created))),1),p("td",et,[I(Ve,null,{"menu-items":S(()=>[I(k(G),null,{default:S(({active:a})=>[I(v,{to:{name:"AccountDomainVerify",params:{domain:u.display_domain}},class:V([a?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"])},{default:S(()=>[B(" Review verification steps ")]),_:2},1032,["to","class"])]),_:2},1024),p("form",{onSubmit:d[0]||(d[0]=fe(a=>k(n)(a),["prevent"])),action:`/api/v1/account/domains/${u.display_domain}/remove`},[p("input",{type:"hidden",name:"shrimp",value:o.value},null,8,nt),I(k(G),{class:"text-red-500"},{default:S(({active:a})=>[p("button",{type:"submit",class:V([a?"bg-gray-100 text-gray-900":"text-gray-700","flex w-full items-center px-4 py-2 text-left text-sm"]),disabled:k(i)},[I(k(X),{icon:"heroicons:trash-20-solid",class:"mr-2 h-5 w-5 text-red-500"}),rt],10,at)]),_:1})],40,tt)]),_:2},1024)])],8,We))),128))])])])])}}}),lt={class:"py-4 mb-16"},dt=T({__name:"AccountDomains",setup(e){const o=y(window.shrimp),r=y(!1),l=y(""),i=y([]),n=async()=>{r.value=!0,l.value="";try{const t=await fetch("/api/v1/account/domains",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch domains");const s=await t.json();i.value=s.records||[]}catch(t){t instanceof Error?l.value=t.message:(console.error("An unexpected error occurred",t),l.value="An unexpected error occurred")}finally{r.value=!1}};return O(()=>{n()}),(t,s)=>(R(),A("main",null,[p("div",lt,[I(ot,{shrimp:o.value,domains:i.value},null,8,["shrimp","domains"])])]))}});export{dt as default};
